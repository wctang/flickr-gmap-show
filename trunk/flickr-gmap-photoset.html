<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>Flickr GMap Show Photoset</title>
    <script src='flickr-gmap.js' type='text/javascript'></script>
</head>

<body onunload="GUnload()" onload="myOnload()">
    <h2 id="header">Flickr GMap Show Photoset</h2>
    <div id="gmap" style="width:800px;height:600px;"/>

    <script type="text/javascript">
function myOnload() {
    if(location.href.indexOf("?")!=-1) {
        var queryString = location.href.substring(location.href.indexOf("?")+1);
        var parameters = queryString.split("&");
        var photosetid;
        
        var pos, paraName, paraValue;
        for(var i=0; i<parameters.length; i++) {
            pos = parameters[i].indexOf('=');
            if(pos == -1) { continue; }
            paraName = parameters[i].substring(0, pos);
            paraValue = parameters[i].substring(pos + 1);
            
            if(paraName == 'photoset_id') {
                photosetid = paraValue;
            }
        }
    }

    if(!photosetid || photosetid.length == 0) {
        alert("not set the photoset_id");
    } else {
        var map = FlickrGmapShow.createPhotoSetMap(document.getElementById("gmap"), photosetid);
    }
}
    </script>

</body>
</html>
