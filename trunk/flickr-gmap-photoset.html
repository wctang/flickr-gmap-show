<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>Flickr GMap Show Photoset</title>

<script src='http://maps.google.com/maps?file=api&amp;v=2&amp;key=ABQIAAAA5iyLqLpUbk1qBe2volmsqxQh1uCj5d-3TWVrUZG2gdqg70DksRQmyqOhA768P8Rr3I-QKGf0waEoCw' type='text/javascript'></script>
    
<link  href='http://flickr-gmap-show.googlecode.com/svn/trunk/lightbox/css/lightbox.css' media='screen' rel='stylesheet' type='text/css'/>
<script src='http://flickr-gmap-show.googlecode.com/svn/trunk/lightbox/js/prototype.js' type='text/javascript'></script>
<script src='http://flickr-gmap-show.googlecode.com/svn/trunk/lightbox/js/scriptaculous.js?load=effects' type='text/javascript'></script>
<script src='http://flickr-gmap-show.googlecode.com/svn/trunk/lightbox/js/lightbox.js' type='text/javascript'></script>
<script src='flickr-gmap.js' type='text/javascript'></script>

<style type="text/css">
img { border:none; }
html {
height:100%;
}
body {
height:100%;margin:0;
}
#mainwrap {
height:80%; width:80%;
}
#gmap {
width:100%; height:100%;
}
</style>

</head>

<body onunload="GUnload()">
    <h2 id="header">Flickr GMap Show Photoset</h2>
    <div id="mainwrap">
        <div id="gmap"></div>
    </div>

    <script type="text/javascript">
    function errorfun(errmsg) {
        document.getElementById('header').innerHTML = errmsg;
    }

        
    if(location.href.indexOf("?")!=-1) {
        var queryString = location.href.substring(location.href.indexOf("?")+1);
        var parameters = queryString.split("&");
        var photosetid;
        
        var pos, paraName, paraValue;
        for(var i=0; i<parameters.length; i++) {
            pos = parameters[i].indexOf('=');
            if(pos == -1) { continue; }
            paraName = parameters[i].substring(0, pos);
            paraValue = parameters[i].substring(pos + 1);
            
            if(paraName == 'photoset_id') {
                photosetid = paraValue;
            }
        }
    }
    
    if(!photosetid || photosetid.length == 0) {
        errorfun("not set the photoset_id");
    } else {
        var fgs = new FlickrGmapShow_PhotoSet("fgs", "gmap", photosetid, errorfun);
    }
    </script>
</body>
</html>
